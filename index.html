<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wegee - Leaf Pixelation Final</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body, html {
            width: 100%; height: 100%;
            background-color: #ffffff;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: "Malgun Gothic", sans-serif;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .content-box {
            width: 22.16%; 
            min-width: 240px;
            aspect-ratio: 4 / 3;
            position: relative;
            background: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        canvas {
            width: 100%;
            height: 100%;
            image-rendering: pixelated;
        }

        #credit-screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            background-color: #ffffff;
            color: #000; font-size: 9pt; text-align: center;
            opacity: 0; pointer-events: none;
            transition: opacity 1s ease-in-out;
        }

        #credit-screen.visible { opacity: 1; pointer-events: auto; }

        .replay-btn {
            margin-top: 15px; padding: 5px 12px;
            background: none; border: 1px solid #000;
            font-size: 8pt; cursor: pointer;
        }

        @media (max-width: 768px) {
            body { align-items: flex-start; }
            .container { margin-top: 15vh; }
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="content-box">
            <canvas id="pixel-canvas"></canvas>

            <div id="credit-screen">
                <p>Concept & Production: Wegee</p>
                <p>@wegee.eui</p>
                <p>wegee.eui@gmail.com</p>
                <br>
                <p>Â© 2026. Wegee. All rights reserved.</p>
                <button class="replay-btn" onclick="location.reload()">REPLAY</button>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('pixel-canvas');
        const ctx = canvas.getContext('2d');
        const creditScreen = document.getElementById('credit-screen');

        const DURATION = 400; // 6ë¶„ 40ì´ˆ
        let startTime = null;
        let lastUpdateTime = -3000; // ì¦‰ì‹œ ì²« í”„ë ˆìž„ì„ ê·¸ë¦¬ê¸° ìœ„í•¨

        canvas.width = 400;
        canvas.height = 300;

        function drawLeaf(context) {
            const cx = canvas.width / 2;
            const cy = canvas.height / 2;
            
            context.save();
            context.translate(cx, cy);
            context.rotate(Math.PI / 4); // ë‚˜ë­‡ìžŽì´ ì‚´ì§ ëˆ„ì›ŒìžˆëŠ” ê°ë„ (45ë„)

            // 1. ë‚˜ë­‡ìžŽ í…Œë‘ë¦¬ (ì§„í•œ ë…¹ìƒ‰)
            context.fillStyle = '#2E7D32'; 
            context.beginPath();
            context.moveTo(0, -90);
            context.quadraticCurveTo(80, 0, 0, 90);
            context.quadraticCurveTo(-80, 0, 0, -90);
            context.fill();

            // 2. ë‚˜ë­‡ìžŽ ë‚´ë¶€ (ê·¸ë¼ë””ì–¸íŠ¸)
            const leafGrad = context.createRadialGradient(-10, -10, 5, 0, 0, 100);
            leafGrad.addColorStop(0, '#D4E157'); // ë°ì€ ì—°ë‘
            leafGrad.addColorStop(1, '#689F38'); // ì§™ì€ ë…¹ìƒ‰
            
            context.fillStyle = leafGrad;
            context.beginPath();
            context.moveTo(0, -86);
            context.quadraticCurveTo(76, 0, 0, 86);
            context.quadraticCurveTo(-76, 0, 0, -86);
            context.fill();

            // 3. ì¤‘ì•™ ìžŽë§¥
            context.strokeStyle = 'rgba(46, 125, 50, 0.5)';
            context.lineWidth = 3;
            context.beginPath();
            context.moveTo(0, -80);
            context.lineTo(0, 80);
            context.stroke();

            context.restore();
        }

        function animate(timestamp) {
            if (!startTime) startTime = timestamp;
            const elapsed = (timestamp - startTime) / 1000;
            const progress = Math.min(elapsed / DURATION, 1);

            // ðŸ’¡ 3ì´ˆë§ˆë‹¤ë§Œ ì—…ë°ì´íŠ¸ (3000ms)
            if (timestamp - lastUpdateTime >= 3000 || progress >= 1) {
                lastUpdateTime = timestamp;

                ctx.clearRect(0, 0, canvas.width, canvas.height);

                if (progress < 1) {
                    const offCanvas = document.createElement('canvas');
                    offCanvas.width = canvas.width;
                    offCanvas.height = canvas.height;
                    const offCtx = offCanvas.getContext('2d');
                    drawLeaf(offCtx);

                    // í”½ì…€ ì‚¬ì´ì¦ˆ ê²°ì • (ì ì  ì»¤ì§)
                    const pixelSize = 1 + (Math.pow(progress, 1.5) * 399);
                    
                    const w = Math.max(1, canvas.width / pixelSize);
                    const h = Math.max(1, canvas.height / pixelSize);
                    
                    ctx.imageSmoothingEnabled = false;
                    ctx.drawImage(offCanvas, 0, 0, canvas.width, canvas.height, 0, 0, w, h);
                    ctx.drawImage(canvas, 0, 0, w, h, 0, 0, canvas.width, canvas.height);
                } else {
                    canvas.style.display = 'none';
                    creditScreen.classList.add('visible');
                    return;
                }
            }
            requestAnimationFrame(animate);
        }

        requestAnimationFrame(animate);
    </script>
</body>
</html>
