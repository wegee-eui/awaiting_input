<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wegee | Maple Leaf Animation</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        /* 1. 기본 초기화 */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body, html {
            width: 100%;
            height: 100%;
            background-color: #ffffff;
            overflow: hidden; /* 스크롤 방지 */
            display: flex;
            font-family: "Malgun Gothic", "Apple SD Gothic Neo", sans-serif;
        }

        /* 2. 레이아웃: 데스크탑/아이패드 중앙 정렬 */
        body {
            justify-content: center;
            align-items: center;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* 3. 애니메이션 박스 (4:3 비율 고정) */
        .content-box {
            width: 22.16%; /* 1200px 중 266px 비율 */
            min-width: 240px;
            aspect-ratio: 4 / 3;
            position: relative;
            background-color: #ffffff;
            display: flex;
            justify-content: center;
            overflow: hidden;
        }

        /* 4. 메이플스토리 스타일 요소 */
        .branch {
            position: absolute;
            top: 0;
            width: 4px;
            height: 5%; /* 세로의 1/20 */
            background: #6D4C41; /* 메이플 갈색 */
            border-radius: 0 0 2px 2px;
            z-index: 2;
        }

        .leaf {
            position: absolute;
            top: 5%; /* 가지 끝에 부착 */
            width: 32px;
            height: 42px;
            background: #8BC34A; /* 연두색 */
            border: 2px solid #33691E; /* 진한 테두리 (도트 감성) */
            border-radius: 2px 85% 5% 85%; /* 나뭇잎 모양 */
            transform-origin: top center;
            z-index: 3;
        }

        .shadow {
            position: absolute;
            bottom: 5%;
            width: 35px;
            height: 8px;
            background: rgba(0, 0, 0, 0.08);
            border-radius: 50%;
            transform: scale(0); /* 처음엔 안 보임 */
            z-index: 1;
        }

        /* 5. 크레딧 화면 */
        #credit-screen {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: #ffffff;
            color: #000000;
            font-size: 9pt;
            text-align: center;
            line-height: 1.8;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s ease;
            z-index: 10;
        }

        #credit-screen.visible {
            opacity: 1;
            pointer-events: auto;
        }

        .replay-btn {
            margin-top: 20px;
            padding: 5px 15px;
            background: none;
            border: 1px solid #000;
            color: #000;
            font-size: 8pt;
            cursor: pointer;
            transition: 0.3s;
        }
        .replay-btn:hover { background: #000; color: #fff; }

        /* 6. 반응형: 모바일 (768px 이하) */
        @media (max-width: 768px) {
            body { align-items: flex-start; }
            .container {
                margin-top: 15vh; /* 상단 여백 유지 */
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="content-box" id="stage">
            <div class="branch"></div>
            <div class="leaf" id="leaf"></div>
            <div class="shadow" id="shadow"></div>

            <div id="credit-screen">
                <p>Concept & Production: Wegee</p>
                <p>@wegee.eui</p>
                <p>wegee.eui@gmail.com</p>
                <br>
                <p>© 2026. Wegee. All rights reserved.</p>
                <button class="replay-btn" onclick="resetAnimation()">REPLAY</button>
            </div>
        </div>
    </div>

    <script>
        const leaf = document.getElementById('leaf');
        const shadow = document.getElementById('shadow');
        const credit = document.getElementById('credit-screen');

        let mainTimeline;

        function startAnimation() {
            // 초기화
            gsap.set(leaf, { x: 0, y: 0, rotation: 0, opacity: 1 });
            gsap.set(shadow, { scale: 0 });
            credit.classList.remove('visible');

            mainTimeline = gsap.timeline();

            // 1. 6분 35초(395초) 동안 좌우 45도 흔들림
            // 테스트를 위해 시간을 줄이려면 395를 낮은 숫자로 바꿔보세요.
            mainTimeline.to(leaf, {
                rotation: 45,
                duration: 2,
                ease: "sine.inOut",
                repeat: 197, // 약 394초
                yoyo: true
            });

            // 2. 395초 후에 낙하 시작
            gsap.delayedCall(395, () => {
                mainTimeline.kill(); // 흔들림 정지

                // 지그재그 살랑살랑 낙하 (4초)
                gsap.to(leaf, {
                    y: "820%", // 하단 착지 위치
                    rotation: 95, // 누운 각도
                    duration: 4,
                    ease: "power1.inOut",
                    onUpdate: function() {
                        // 떨어지면서 좌우로 흔들리는 물리 효과
                        gsap.set(leaf, { x: Math.sin(this.progress() * 12) * 40 });
                    },
                    onComplete: () => {
                        credit.classList.add('visible');
                    }
                });

                // 그림자 서서히 나타남
                gsap.to(shadow, {
                    scale: 1,
                    duration: 4,
                    ease: "power1.inOut"
                });
            });
        }

        function resetAnimation() {
            location.reload(); // 가장 확실한 초기화 방법
        }

        // 페이지 로드 시 시작
        window.onload = startAnimation;
    </script>
</body>
</html>
