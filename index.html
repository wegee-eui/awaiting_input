<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wegee Animation</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body,html{
    width:100%;
    height:100%;
    background:#fff;
    overflow:hidden;
    display:flex;
    justify-content:center;
    align-items:center;
    font-family:"Malgun Gothic","Apple SD Gothic Neo","Dotum",sans-serif;
}

.container{
    width:100%;
    max-width:1200px;
    display:flex;
    justify-content:center;
    align-items:center;
    position:relative;
}

.content-box{
    width:22.16%;
    min-width:200px;
    aspect-ratio:4/3;
    position:relative;
}

/* Ï∫îÎ≤ÑÏä§ */
canvas{
    position:absolute;
    inset:0;
    width:100%;
    height:100%;
    background:#fff;
}

/* bubble layer (Ï†ÑÏ≤¥ ÌôîÎ©¥) */
#bubble-layer{
    position:fixed;
    inset:0;
    pointer-events:none;
}

/* ÌÅ¨Î†àÎîß */
#credit-screen{
    position:absolute;
    inset:0;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    color:#000;
    font-size:9pt;
    text-align:center;
    line-height:1.8;
    background:#fff;
    opacity:0;
    transition:opacity 1s ease;
}

#credit-screen.visible{
    opacity:1;
}

.replay-btn{
    margin-top:15px;
    padding:5px 12px;
    background:none;
    border:1px solid #000;
    font-size:8pt;
    cursor:pointer;
}
</style>
</head>

<body>
<div class="container">
<div class="content-box">

<canvas id="intro"></canvas>
<canvas id="bubble-layer"></canvas>

<div id="credit-screen">
<p>Concept & Production: Wegee</p>
<p>@wegee.eui</p>
<p>wegee.eui@gmail.com</p>
<br>
<p>¬© 2026. Wegee. All rights reserved.</p>
<button class="replay-btn" onclick="replay()">REPLAY</button>
</div>

</div>
</div>

<script>
// ================= intro =================
const intro = document.getElementById('intro');
const ictx = intro.getContext('2d');

function resizeIntro(){
    const r=intro.getBoundingClientRect();
    intro.width=r.width*devicePixelRatio;
    intro.height=r.height*devicePixelRatio;
}
resizeIntro();
window.addEventListener('resize',resizeIntro);

function drawCircle(ctx,x,y,r,color="#e3e3e3"){
    ctx.beginPath();
    ctx.arc(x,y,r,0,Math.PI*2);
    ctx.fillStyle=color;
    ctx.fill();
}

// ================= bubble =================
const bubbleCanvas=document.getElementById('bubble-layer');
const bctx=bubbleCanvas.getContext('2d');
const credit=document.getElementById('credit-screen');

let bubbles=[];
let startTime;
let phase="intro";

function resizeBubble(){
    bubbleCanvas.width=window.innerWidth*devicePixelRatio;
    bubbleCanvas.height=window.innerHeight*devicePixelRatio;
}
resizeBubble();
window.addEventListener('resize',resizeBubble);

// Î∂àÍ∑úÏπô bubble ÏÉùÏÑ±
function spawnBubble(){
    const colors=["#e3e3e3","#f7ff00","#ff2bd6"];
    bubbles.push({
        x: Math.random()*bubbleCanvas.width,
        y: bubbleCanvas.height + Math.random()*40,
        r: (3 + Math.random()*3)*devicePixelRatio,
        speed: (0.5 + Math.random()*1.2)*devicePixelRatio,
        color: colors[Math.floor(Math.random()*colors.length)]
    });
}

// ================= animation =================
function animate(t){
    if(!startTime) startTime=t;
    const time=(t-startTime)/1000;

    // ---------- intro (0‚Äì5s) ----------
    if(phase==="intro"){
        ictx.clearRect(0,0,intro.width,intro.height);

        const cx=intro.width/2;
        const cy=intro.height/2;
        const rot=time*1.5;

        for(let i=0;i<7;i++){
            const angle=rot+(Math.PI*2/7)*i;
            const radius=26*devicePixelRatio; // üîπ Ï∂ïÏÜå
            const x=cx+Math.cos(angle)*radius;
            const y=cy+Math.sin(angle)*radius;
            drawCircle(ictx,x,y,6*devicePixelRatio); // üîπ Ïõê Ï∂ïÏÜå
        }

        if(time>=5){
            phase="bubble";
            startTime=t;
        }
    }

    // ---------- bubble fill ----------
    else if(phase==="bubble"){
        bctx.clearRect(0,0,bubbleCanvas.width,bubbleCanvas.height);

        // Í≥ÑÏÜç ÏÉùÏÑ±
        if(bubbles.length<900){
            for(let i=0;i<8;i++) spawnBubble();
        }

        for(const b of bubbles){
            b.y-=b.speed;
            drawCircle(bctx,b.x,b.y,b.r,b.color);
        }

        // Í±∞Ïùò Ï∞ºÏúºÎ©¥ Ï¢ÖÎ£å
        if(bubbles.length>850){
            setTimeout(()=>{
                credit.classList.add("visible");
            },800);
            return;
        }
    }

    requestAnimationFrame(animate);
}

function start(){
    bubbles=[];
    phase="intro";
    startTime=null;
    credit.classList.remove("visible");
    requestAnimationFrame(animate);
}

function replay(){ start(); }

start();
</script>
</body>
</html>
